<?xml version="1.0" encoding="utf-8"?>


<odoo>

<!--     course view  -->
<!-- form view -->
<record id="course_form_view" model="ir.ui.view">
<field name="name">course.form</field>
<field name="model">openacademy.course</field>
<field name="arch" type="xml">
<form String="Course Form">
<!--                 status bar controller  -->
<header>
<button name="submitted_action" type="object" string="Submitted" class="oe_highlight" states="draft"/>
<button name="department_manager" type="object" string="Department Manager Approved" states="submitted"/>
<button name="college_manager" type="object" string="College Manager Approved" states="department_manager_approved"/>
<button name="disapproved_action" type="object" string="Disapproved" states="draft,submitted,department_manager_approved,college_manager"/>
<button name="finally_approved_action" type="object" string="Finally approved" states="college_manager"/>
<button name="reset_to_draft" type="object" string="Reset to draft" states="disapproved,college_manager"/>
<field name="state" widget="statusbar" statusbar_visible="draft,submitted,department_manager_approved,college_manager"/>
</header>
<header>
<!--<button name="print_report" string="Print Course Report" type="object" states="draft,finally_approved" class="oe_highlight" groups="base.group_user" data-hotkey="k"/>-->
</header>
<sheet>
<group>
<field name="name"/>
<field name="responsible_id"/>
</group>
<notebook>
<page string="Description">
<field name="description"/>
</page>
<page string="Sessions">
<!--<field name="session_id">-->
<!--<tree string="Register sessions">-->
<!--<field name="name"/>-->
<!--<field name="instructor_id"/>-->
<!--<field name="start_date"/>-->
<!--<field name="duration"/>-->
<!--</tree>-->
<!--</field>-->
</page>
</notebook>
</sheet>
<div class="oe_chatter">
<field name="message_follower_ids"/>
<field name="message_ids" options="{'post_refresh': 'recipients'}"/>
</div>
</form>
</field>
</record>

<record id="course_tree_view" model="ir.ui.view">
<field name="name">course.tree</field>
<field name="model">openacademy.course</field>
<field name="arch" type="xml">
<tree>
<field name="name"/>
<field name="responsible_id" widget="many2one_avatar"/>
<field name="description"/>
<field name="state" decoration-success="state =='finally_approved'" decoration-danger="state=='disapproved'" decoration-warning="state =='department_manager_approved'" decoration-info="state =='college_manager'" decoration-primary="state =='submitted'" decoration-muted="state =='draft'" widget="badge"/>
</tree>
</field>
</record>
<!--  search view -->
<record id="course_search_view" model="ir.ui.view">
<field name="name">course.search</field>
<field name="model">openacademy.course</field>
<field name="arch" type="xml">
<search>
<field name="name"/>
<field name="description"/>
<filter name="my_courses" string="My Courses" domain="[('responsible_id','=',uid)]"/>
<group string="Group By">
<filter name="by_responsible" string="Responsible" context="{'group_by':'responsible_id'}"/>
</group>
</search>
</field>
</record>
<record id="course_list_action" model="ir.actions.act_window">
<field name="name">Courses</field>
<field name="res_model">openacademy.course</field>
<field name="view_mode">tree,form</field>
<field name="context" eval="{'search_default_my_courses' :1}"/>
<field name="help" type="html">
<p class="o_view_nocontent_smiling_face"> Create the course </p>
</field>
</record>
<menuitem id="main_openacademy_menu" name="Open Academy"/>
<menuitem id="openacademy_menu" name="Open Academy" parent="main_openacademy_menu"/>
<menuitem id="courses_menu" name="Courses" parent="main_openacademy_menu" action="course_list_action"/>


</odoo>
